<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Produsele noastre – MSA Handmade</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="cart.js"></script>
</head>
<body>
  <div class="promo">Reduceri până la <b>-20%</b> · Livrare gratuită de la <b>300 RON</b></div>

  <header class="header">
    <nav id="main-nav">
      <a href="index.html">Acasă</a>
      <a href="produse.html">Produse</a>
      <a href="despre.html">Despre</a>
      <a href="contact.html">Contact</a>
      <a href="cos.html" class="cart-pill">🛒 <span id="cart-count">0</span></a>
    </nav>
  </header>

  <main class="wrap">
    <h1>Produsele noastre</h1>

    <section class="grid" id="prod-grid">
      <!-- Card 1 -->
      <article class="card" data-id="coro-rosu-auriu" data-name="Coroniță Crăciun – roșu & auriu" data-price="35" data-image="images/coro-rosu-auriu.jpg" data-desc="Strălucire caldă de sărbătoare: flori aurii și accente roșii ce transformă ușa sau peretele într-un colț de poveste.">
        <img src="images/coro-rosu-auriu.jpg" alt="Coroniță Crăciun roșu & auriu" class="card-img">
        <div class="card-body">
          <h3>Coroniță Crăciun – roșu & auriu <span class="price">35 RON</span></h3>
          <p>Strălucire caldă de sărbătoare: flori aurii și accente roșii.</p>
          <button class="btn primary add-to-cart">Adaugă în coș</button>
        </div>
      </article>

      <!-- poți duplica modelul pentru alte produse -->
    </section>
  </main>

  <!-- MODAL produs -->
  <div class="modal" id="prod-modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-body">
        <img id="m-img" src="" alt="">
        <div class="modal-content">
          <h3 id="m-title"></h3>
          <p id="m-desc" class="muted"></p>
          <p style="font-weight:800;margin:.5rem 0">Preț: <span id="m-price"></span></p>
          <button class="btn primary" id="m-add">Adaugă în coș</button>
          <button class="btn ghost" id="m-close" style="margin-left:8px">Închide</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // badge
    document.addEventListener('DOMContentLoaded', MSACart.updateCartCountBadge);

    // click pe poză => modal
    const modal = document.getElementById('prod-modal');
    const mImg = document.getElementById('m-img');
    const mTitle = document.getElementById('m-title');
    const mDesc = document.getElementById('m-desc');
    const mPrice = document.getElementById('m-price');
    const mAdd = document.getElementById('m-add');
    let modalProduct = null;

    document.querySelectorAll('.card-img').forEach(img=>{
      img.addEventListener('click', ()=>{
        const card = img.closest('.card');
        modalProduct = {
          id: card.dataset.id,
          name: card.dataset.name,
          price: Number(card.dataset.price),
          image: card.dataset.image
        };
        mImg.src = card.dataset.image;
        mTitle.textContent = card.dataset.name;
        mDesc.textContent = card.dataset.desc || '';
        mPrice.textContent = `${Number(card.dataset.price).toFixed(2)} RON`;
        modal.classList.add('open');
      });
    });
    document.getElementById('m-close').onclick = ()=> modal.classList.remove('open');
    modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.classList.remove('open'); });

    // adaugă din modal
    mAdd.addEventListener('click', ()=>{
      if(modalProduct){
        MSACart.addToCart(modalProduct, 1);
        modal.classList.remove('open');
      }
    });

    // adaugă din card
    document.querySelectorAll('.add-to-cart').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const card = btn.closest('.card');
        MSACart.addToCart({
          id: card.dataset.id,
          name: card.dataset.name,
          price: Number(card.dataset.price),
          image: card.dataset.image
        }, 1);
      });
    });
  </script>
</body>
</html>
