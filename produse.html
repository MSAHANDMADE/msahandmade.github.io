<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Produse â€“ MSA Handmade</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}
    .card{background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.06);overflow:hidden;text-align:center}
    .card img{width:100%;height:240px;object-fit:cover;cursor:pointer}
    .card h3{margin:10px 0 5px;font-size:18px}
    .price{color:#0f3f2e;font-weight:700}
    .btn{background:#0f3f2e;color:#fff;padding:10px 16px;border-radius:12px;border:0;font-weight:600;margin:10px 0;cursor:pointer}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.open{display:flex}
    .modal-card{background:#fff;border-radius:16px;max-width:800px;width:100%;overflow:hidden;position:relative}
    .modal img{width:100%;height:auto}
    .modal-content{padding:20px}
    .close-x{position:absolute;top:10px;right:10px;background:#0f3f2e;color:#fff;border:0;border-radius:10px;padding:6px 10px;cursor:pointer}
  </style>
</head>
<body>
  <header class="wrap" style="display:flex;justify-content:space-between;align-items:center">
    <h1>Produsele noastre</h1>
    <a href="cos.html">ðŸ›’ <span id="cart-count">0</span></a>
  </header>

  <main class="wrap">
    <section class="grid" id="product-list"></section>
  </main>

  <div class="modal" id="modal">
    <div class="modal-card">
      <button class="close-x" id="close">âœ•</button>
      <img id="m-img" src="" alt="">
      <div class="modal-content">
        <h2 id="m-title"></h2>
        <p id="m-price" class="price"></p>
        <button id="m-add" class="btn">AdaugÄƒ Ã®n coÈ™</button>
      </div>
    </div>
  </div>

  <script>
    // === PRODUSE AUTOMATE ===
    const imageFiles = [
      "buchet.jpg","coronita1.png","coronita2.png","crin.jpg","dans.jpg","family.png",
      "flori.jpg","floricele.png","indragostitti.jpg","inger.jpg","ingeras.png",
      "isus.png","logodna.jpg","lumanare_floarea-soarelui.png","peisaj.jpg",
      "peisajiarna.jpg","sarut.jpg"
    ];

    const prices = {
      buchet:39, coronita1:35, coronita2:35, crin:33, dans:29, family:30,
      flori:29, floricele:27, indragostitti:31, inger:30, ingeras:28,
      isus:30, logodna:35, "lumanare_floarea-soarelui":38, peisaj:32,
      peisajiarna:32, sarut:34
    };

    const container = document.getElementById("product-list");

    imageFiles.forEach(file => {
      const name = file.split(".")[0];
      const price = prices[name] || 30;
      const title = name.charAt(0).toUpperCase() + name.slice(1).replace(/_/g," ");
      const card = document.createElement("article");
      card.className="card";
      card.innerHTML=`
        <img src="images/${file}" alt="${title}" data-name="${title}" data-price="${price}" data-image="images/${file}">
        <h3>${title}</h3>
        <div class="price">${price} RON</div>
        <button class="btn add-to-cart" data-id="${name}" data-name="${title}" data-price="${price}" data-image="images/${file}">AdaugÄƒ Ã®n coÈ™</button>`;
      container.appendChild(card);
    });

    // === COÈ˜ ===
    const STORAGE_KEY="msa_cart";
    const readCart=()=>JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");
    const writeCart=(d)=>localStorage.setItem(STORAGE_KEY,JSON.stringify(d));
    const updateBadge=()=>{const el=document.getElementById("cart-count");const c=readCart().reduce((s,i)=>s+i.qty,0);el.textContent=c||0;}
    const addItem=(it)=>{const c=readCart();const i=c.findIndex(p=>p.id===it.id);if(i>=0)c[i].qty+=1;else c.push(it);writeCart(c);updateBadge();}

    document.addEventListener("click",e=>{
      if(e.target.classList.contains("add-to-cart")){
        const b=e.target;
        addItem({id:b.dataset.id,name:b.dataset.name,price:+b.dataset.price,image:b.dataset.image,qty:1});
        b.textContent="AdÄƒugat âœ“";setTimeout(()=>b.textContent="AdaugÄƒ Ã®n coÈ™",1000);
      }
    });

    // === MODAL ===
    const modal=document.getElementById("modal");
    const mImg=document.getElementById("m-img");
    const mTitle=document.getElementById("m-title");
    const mPrice=document.getElementById("m-price");
    const mAdd=document.getElementById("m-add");
    let current=null;

    container.addEventListener("click",e=>{
      if(e.target.tagName==="IMG"){
        const img=e.target;
        mImg.src=img.dataset.image;
        mTitle.textContent=img.dataset.name;
        mPrice.textContent=img.dataset.price+" RON";
        current={id:img.dataset.name.toLowerCase(),name:img.dataset.name,price:+img.dataset.price,image:img.dataset.image,qty:1};
        modal.classList.add("open");
      }
    });

    document.getElementById("close").onclick=()=>modal.classList.remove("open");
    modal.onclick=e=>{if(e.target===modal)modal.classList.remove("open");};
    mAdd.onclick=()=>{if(current)addItem(current);modal.classList.remove("open");};

    updateBadge();
  </script>
</body>
</html>
