<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coș – MSA Handmade</title>

  <meta name="description" content="Coșul tău MSA Handmade. Livrare gratuită de la 300 RON." />
  <link rel="stylesheet" href="styles.css" />

  <!-- EmailJS (pentru confirmări) -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
  <div class="promo">
    Reduceri până la <b>-20%</b> · Livrare gratuită de la <b>300 RON</b>
  </div>

  <header class="header">
    <nav id="main-nav">
      <a href="index.html">Acasă</a>
      <a href="produse.html">Produse</a>
      <a href="despre.html">Despre</a>
      <a href="contact.html">Contact</a>
      <a href="cos.html" class="cart-pill" aria-label="Vezi coșul">🛒 <span id="cart-count">0</span></a>
    </nav>
  </header>

  <main class="wrap narrow">
    <h1>Coșul tău</h1>

    <section class="box">
      <table class="cart">
        <thead>
          <tr>
            <th>Produs</th>
            <th>Preț</th>
            <th>Cant.</th>
            <th>Total</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="cart-body">
          <tr><td colspan="5">Se încarcă…</td></tr>
        </tbody>
      </table>

      <div class="actions" style="margin-top:12px">
        <button class="btn ghost" onclick="MSACart.clearCart(); MSACart.render();">Golește coșul</button>
      </div>

      <p class="muted" style="margin-top:10px">
        * Produsele sunt realizate manual — pot exista mici variații.
      </p>
    </section>

    <section class="box totals">
      <h2>Totaluri</h2>
      <div class="row"><span>Subtotal</span><b id="t-sub">0 RON</b></div>
      <div class="row"><span>Reducere</span><b id="t-disc">0 RON</b></div>
      <div class="row"><span>Livrare</span><b id="t-ship">17 RON</b></div>
      <div class="row big"><span>Total</span><b id="t-total">17 RON</b></div>
      <p class="muted" style="margin-top:6px">
        Reduceri automate: ≥200 RON −10%, ≥300 RON −15%, ≥400 RON −20%.<br>
        Livrare gratuită de la 300 RON (chiar dacă se aplică reducere).
      </p>
    </section>

    <section class="box" style="margin-top:16px">
      <h2>Detalii pentru livrare</h2>
      <form id="checkout-form">
        <fieldset>
          <legend>Tip client</legend>
          <label><input type="radio" name="tip" value="Persoană fizică" checked> Persoană fizică</label>
          &nbsp;&nbsp;
          <label><input type="radio" name="tip" value="Persoană juridică"> Persoană juridică</label>
        </fieldset>

        <div class="row">
          <label>Nume<input name="nume" required></label>
          <label>Prenume<input name="prenume" required></label>
        </div>
        <div class="row">
          <label>Email<input name="email" type="email" required></label>
          <label>Telefon<input name="telefon" required></label>
        </div>
        <div class="row">
          <label>Județ<input name="judet" required></label>
          <label>Oraș<input name="oras" required></label>
        </div>
        <div class="row">
          <label>Cod poștal<input name="codpostal"></label>
          <label>Adresă<textarea name="adresa" rows="2" required></textarea></label>
        </div>

        <!-- Câmpuri PJ – apar vizual doar dacă este selectată „Persoană juridică” -->
        <div id="pj-only" style="display:none">
          <div class="row">
            <label>Firmă (opțional)<input name="firma"></label>
            <label>CUI (opțional)<input name="cui" placeholder="RO..."></label>
          </div>
        </div>

        <div class="row">
          <label>Mențiuni (opțional)
            <textarea name="mentiuni" rows="2" placeholder="Ex: interval livrare, observații"></textarea>
          </label>
        </div>

        <button id="submit-order" class="btn primary" type="submit">Confirmă comanda</button>
      </form>
    </section>
  </main>

  <!-- scripturile site-ului -->
  <script>
    // arată/ascunde câmpurile PJ
    document.addEventListener('change', (e)=>{
      if (e.target && e.target.name === 'tip') {
        document.getElementById('pj-only').style.display =
          (e.target.value === 'Persoană juridică') ? 'block' : 'none';
      }
    });
  </script>

  <!-- cart.js (versiunea de mai sus) -->
  <script src="cart.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      MSACart.render();
      MSACart.hookCheckout('#checkout-form', '#submit-order');
    });
  </script>
</body>
</html>
