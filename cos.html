<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CoÈ™ â€” MSA Handmade</title>

  <!-- ===== SEO META ===== -->
  <meta name="description" content="FinalizeazÄƒ comanda pentru lumÃ¢nÄƒrile È™i decoraÈ›iunile handmade MSA. Livrare gratuitÄƒ de la 300 RON È™i reduceri pÃ¢nÄƒ la 20%.">
  <meta name="keywords" content="MSA Handmade, coÈ™, comandÄƒ, lumÃ¢nÄƒri, decoraÈ›iuni, handmade, cadouri, proforma, persoanÄƒ juridicÄƒ, persoanÄƒ fizicÄƒ">
  <meta name="author" content="MSA Handmade">
  <link rel="canonical" href="https://www.msahandmade.ro/cos.html">

  <!-- ===== OPEN GRAPH ===== -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.msahandmade.ro/cos.html">
  <meta property="og:title" content="CoÈ™ â€” MSA Handmade">
  <meta property="og:description" content="FinalizeazÄƒ comanda pentru lumÃ¢nÄƒri È™i decoraÈ›iuni handmade. Livrare gratuitÄƒ de la 300 RON.">
  <meta property="og:image" content="https://www.msahandmade.ro/images/logo.png">

  <link rel="stylesheet" href="styles.css" />
  <style>
    /* === FIX MSA: aliniere perfectÄƒ Cant. + Total pe mobil === */
    @media (max-width: 640px) {
      table.cart { table-layout: fixed; }
      table.cart th:nth-child(1), table.cart td:nth-child(1) { width: 46%; }
      table.cart th:nth-child(2), table.cart td:nth-child(2) { width: 16%; text-align: right; }
      table.cart th:nth-child(3), table.cart td:nth-child(3) { width: 20%; text-align: center; }
      table.cart th:nth-child(4), table.cart td:nth-child(4) { width: 18%; text-align: right; white-space: nowrap; }
    }
    /* === Stil pentru lista + tabel === */
    #cart-list { background:#fff; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.06); padding:12px; margin-bottom:16px; }
    #cart-table { width:100%; border-collapse:collapse; }
    #cart-table td { padding:10px; border-bottom:1px solid #eee; vertical-align:middle; }
    #cart-table img { width:72px; height:72px; object-fit:cover; border-radius:8px; }
    .muted { color:#777; font-size:.9rem; }
    .qty { display:inline-flex; align-items:center; border:1px solid #ddd; border-radius:10px; overflow:hidden; background:#fff; }
    .qty button { width:36px; height:36px; border:0; background:#f6f6f6; color:#111; font-size:20px; font-weight:700; display:flex; align-items:center; justify-content:center; }
    .qty input { width:54px; height:36px; border:0; text-align:center; font-size:16px; }
  </style>
</head>

<body>
  <!-- PROMO -->
  <div class="promo">
    <b>Reduceri pÃ¢nÄƒ la -20%</b> Â· <b>Livrare gratuitÄƒ</b> de la <b>300 RON</b>
  </div>

  <!-- HEADER -->
  <header class="header">
    <nav id="main-nav" class="wrap">
      <a href="index.html">AcasÄƒ</a>
      <a href="produse.html">Produse</a>
      <a href="despre.html">Despre</a>
      <a href="contact.html">Contact</a>
      <a href="cos.html" class="cart-pill" aria-label="Vezi coÈ™ul">ðŸ›’ <span id="cart-count">0</span></a>
    </nav>
  </header>

  <main class="wrap narrow">
    <h1>CoÈ™ul tÄƒu</h1>

    <!-- === LISTA PRODUSE === -->
    <section id="cart-list">
      <!-- compatibil cu ambele structuri -->
      <table id="cart-table" class="cart"><tbody id="cart-body"></tbody></table>
      <div id="items"></div>

      <div class="actions" style="margin-top:8px">
        <button id="btn-clear" class="btn ghost" type="button">GoleÈ™te coÈ™ul</button>
      </div>
      <p class="muted" style="margin-top:8px">* Imaginile sunt cu titlu de prezentare. Produsele sunt realizate manual â€” pot exista mici variaÈ›ii.</p>
    </section>

    <!-- === TOTALURI === -->
    <section class="box">
      <h2>Totaluri</h2>
      <div class="totals">
        <div class="row"><span>Subtotal</span><b id="subtot">0.00 RON</b></div>
        <div class="row"><span>Reducere</span><b id="disc">0.00 RON</b></div>
        <div class="row"><span>Livrare</span><b id="ship">17.00 RON</b></div>
        <div class="row big"><span>Total</span><b id="grand">17.00 RON</b></div>
        <div class="muted">Reduceri automate: â‰¥200 RON â€“10%, â‰¥300 RON â€“15% + livrare gratuitÄƒ, â‰¥400 RON â€“20%.</div>
      </div>
    </section>

    <!-- === FORMULAR COMANDÄ‚ === -->
    <form id="order-form" class="box" style="margin-top:14px">
      <fieldset>
        <legend>Tip client</legend>
        <label><input type="radio" name="tip" value="PersoanÄƒ fizicÄƒ" checked> PersoanÄƒ fizicÄƒ</label>
        &nbsp;&nbsp;
        <label><input type="radio" name="tip" value="PersoanÄƒ juridicÄƒ"> PersoanÄƒ juridicÄƒ</label>
      </fieldset>

      <div class="row"><label>Nume<input name="nume" required></label></div>
      <div class="row"><label>Prenume<input name="prenume" required></label></div>
      <div class="row"><label>Email<input type="email" name="email" required></label></div>
      <div class="row"><label>Telefon<input name="telefon" required></label></div>
      <div class="row"><label>JudeÈ›<input name="judet" required></label></div>
      <div class="row"><label>OraÈ™<input name="oras" required></label></div>
      <div class="row"><label>Cod poÈ™tal<input name="codpostal" required></label></div>
      <div class="row"><label>AdresÄƒ<input name="adresa" required></label></div>

      <div id="pj" style="display:none;margin-top:10px">
        <hr>
        <strong>PersoanÄƒ juridicÄƒ</strong>
        <div class="row"><label>FirmÄƒ<input name="firma"></label></div>
        <div class="row"><label>CUI<input name="cui"></label></div>
        <div class="row"><label>Reg. Com.<input name="regcom"></label></div>
      </div>

      <div class="row"><label>MenÈ›iuni<textarea name="mentiuni" rows="3" placeholder="Culoare, mesaj, interval orar etc."></textarea></label></div>

      <div class="actions" style="margin-top:12px">
        <button type="submit" id="place-order" class="btn primary">ConfirmÄƒ comanda</button>
      </div>
    </form>
  </main>

  <footer>
    <small>&copy; <span id="year"></span> â€“ MSA Handmade. Toate drepturile rezervate.</small>
    <nav class="legal-nav">
      <a href="termeni.html">Termeni & CondiÈ›ii</a> Â·
      <a href="confidentialitate.html">ConfidenÈ›ialitate</a> Â·
      <a href="cookies.html">Cookies</a> Â·
      <a href="retur.html">Retur</a>
    </nav>
  </footer>

  <!-- === SCRIPTURI === -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script src="cart.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // PF / PJ toggle
    document.addEventListener('change', (e)=>{
      if(e.target.name==='tip'){
        document.getElementById('pj').style.display =
          e.target.value === 'PersoanÄƒ juridicÄƒ' ? '' : 'none';
      }
    });

    // Golire coÈ™
    document.getElementById('btn-clear')?.addEventListener('click', ()=>{
      if(confirm('Sigur goleÈ™ti coÈ™ul?')){
        MSACart.clearCart();
        MSACart.render();
      }
    });

    // IniÈ›ializare + randare
    document.addEventListener('DOMContentLoaded', ()=>{
      MSACart?.render?.();
    });

    // Submit comandÄƒ (PF/PJ)
    document.getElementById('order-form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const list = MSACart.readCart?.() || [];
      if(!list.length) return alert('CoÈ™ul este gol.');

      const btn = document.getElementById('place-order');
      btn.disabled = true; btn.textContent = 'Se trimiteâ€¦';
      try {
        await MSACart.submitOrder(new FormData(e.target));
      } catch(err) {
        alert('Eroare la trimiterea comenzii: ' + (err.message||''));
      } finally {
        btn.disabled = false; btn.textContent = 'ConfirmÄƒ comanda';
      }
    });
  </script>
</body>
</html>
