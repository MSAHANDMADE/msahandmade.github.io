<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coș - MSA Handmade Decor</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<header class="site-header">
  <a class="brand" href="index.html"><img src="logo.png" alt="MSA Handmade Decor" class="brand-logo"></a>
  <nav class="nav-links">
    <a href="index.html">Acasă</a>
    <a href="produse.html">Produse</a>
    <a href="contact.html">Contact</a>
    <a href="cos.html" class="cart-link">Coș (<span id="cart-count">0</span>)</a>
  </nav>
</header>

<main class="container">
  <h1 class="page-title">Coșul tău</h1>
  <div id="cart-items"></div>
  <div id="cart-totals"></div>

  <h2>Date livrare (plata la livrare)</h2>

  <form id="orderForm"
        action="https://formsubmit.co/msahandmade.contact@gmail.com"
        method="POST"
        onsubmit="return prepareAndSubmit(this)"
        class="order-form">

    <!-- Ascunse pentru FormSubmit -->
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_template" value="table">
    <input type="hidden" name="_subject" value="Comandă nouă — msahandmade.ro">
    <input type="hidden" name="_next" value="https://msahandmade.ro/multumesc.html">
    <input type="hidden" name="_autoresponse" 
           value="Mulțumim pentru comandă! Am primit solicitarea ta și te vom contacta pentru detalii de livrare. — M.S.A Handmade Decor">

    <!-- Ascunse pentru date produse -->
    <input type="hidden" name="produse" id="f_items">
    <input type="hidden" name="subtotal" id="f_subtotal">
    <input type="hidden" name="livrare" id="f_livrare">
    <input type="hidden" name="total" id="f_total">

    <div class="radio-group">
      <label><input type="radio" name="tip" value="Persoană fizică" checked onchange="togglePJ(this)"> Persoană fizică</label>
      <label><input type="radio" name="tip" value="Persoană juridică" onchange="togglePJ(this)"> Persoană juridică</label>
    </div>

    <div class="form-row">
      <label>Nume
        <input name="nume" required>
      </label>
      <label>Prenume
        <input name="prenume" required>
      </label>
    </div>

    <div class="form-row">
      <label>Telefon
        <input name="telefon" inputmode="tel" required>
      </label>
      <label>Email
        <input name="email" type="email" placeholder="exemplu@domeniu.ro" required>
      </label>
    </div>

    <div class="form-row">
      <label>Județ
        <input name="judet" required>
      </label>
      <label>Oraș
        <input name="oras" required>
      </label>
    </div>

    <div class="form-row">
      <label>Cod poștal
        <input name="codpostal" inputmode="numeric">
      </label>
      <label>Adresă
        <input name="adresa" required>
      </label>
    </div>

    <div id="pj-fields" style="display:none">
      <div class="form-row">
        <label>Denumire firmă
          <input name="firma">
        </label>
        <label>CUI
          <input name="cui">
        </label>
      </div>
    </div>

    <label>Mențiuni (opțional)
      <textarea name="mentiuni" rows="3" placeholder="Culoare/variantă dorită, interval livrare etc."></textarea>
    </label>

    <div class="form-row" style="justify-content:flex-start; gap:10px">
      <button id="submitBtn" type="submit" class="btn-primary">Trimite comanda</button>
      <button type="button" class="btn-ghost" onclick="clearCart(); renderCart();">Golește coșul</button>
    </div>
  </form>

  <div id="status" class="status"></div>
</main>

<footer class="site-footer">
  <span id="y"></span> © M.S.A Handmade Decor – Toate drepturile rezervate.
</footer>

<script src="cart.js"></script>
<script>
  document.getElementById('y').textContent = new Date().getFullYear();
  renderCart();
</script>
</body>
</html>
