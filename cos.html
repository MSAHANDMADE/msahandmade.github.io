<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CoÈ™ul tÄƒu â€” MSA Handmade</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css?v=1" />

  <style>
    :root{
      --bg:#fff;
      --card:#fff;
      --text:#0a0f1a;
      --muted:#6b7280;
      --brand:#0f172a;
      --line:#e5e7eb;
      --pill:#0b1220;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:var(--bg)}
    a{color:inherit;text-decoration:none}
    .container{max-width:980px;margin:0 auto;padding:20px}

    /* Header mini */
    .nav{
      position:sticky;top:0;z-index:10;background:var(--bg);
      border-bottom:1px solid var(--line);
    }
    .nav-inner{display:flex;gap:20px;align-items:center;justify-content:flex-start;padding:14px 20px;max-width:980px;margin:0 auto}
    .nav a{font-weight:600}
    .badge{margin-left:8px;background:#fde68a;color:#7c2d12;border-radius:999px;padding:2px 8px;font-weight:700}

    h1{font-size:40px;margin:24px 0 8px}
    h2{font-size:28px;margin:0 0 12px}
    h3{font-size:18px;margin:0 0 8px}
    .card{
      background:var(--card);border:1px solid var(--line);
      border-radius:16px;padding:18px
    }

    /* Tabel coÈ™ */
    .cart-table{width:100%;border-collapse:separate;border-spacing:0 14px}
    .cart-table thead th{
      text-align:left;color:var(--muted);font-weight:600;padding:8px 10px
    }
    .cart-table tbody tr{background:#fff;border:1px solid var(--line);border-radius:12px}
    .cart-table tbody td{padding:14px 12px;vertical-align:middle}
    .cart-product{display:flex;gap:14px;align-items:center}
    .cart-product img{width:72px;height:72px;object-fit:cover;border-radius:10px;flex:0 0 72px}
    .cart-name{font-weight:700;line-height:1.25}
    .cart-price{color:var(--muted);font-size:13px;margin-top:4px}

    /* Qty controls â€“ vizibile, mari */
    .qty{display:flex;align-items:center;gap:8px}
    .qminus,.qplus{
      width:38px;height:38px;border-radius:10px;border:1px solid var(--line);
      background:#f8fafc;font-size:22px;line-height:1;display:inline-flex;
      align-items:center;justify-content:center;cursor:pointer;user-select:none
    }
    .qty input{
      width:56px;height:38px;border:1px solid var(--line);border-radius:10px;
      text-align:center;font-weight:700
    }

    .cell-total{font-weight:800;font-size:20px;text-align:right}
    .remove-btn{
      border:0;background:#fee2e2;color:#991b1b;width:40px;height:40px;border-radius:12px;
      font-size:22px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer
    }

    /* Butoane sub tabel */
    .row-actions{display:flex;gap:14px}
    .btn{padding:12px 18px;border-radius:12px;border:1px solid var(--line);font-weight:700;background:#fff}
    .btn.primary{background:#0b1220;color:#fff;border-color:#0b1220}

    /* Panou totaluri */
    .totals{display:grid;gap:10px}
    .totals .line{display:flex;justify-content:space-between;color:#111}
    .totals .line small{color:var(--muted)}
    .totals .total{font-size:24px;font-weight:800}

    /* Formular */
    .form-card{margin-top:18px}
    .switch{display:flex;gap:22px;margin:6px 0 14px}
    .switch label{display:flex;gap:8px;align-items:center}
    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .form-grid .full{grid-column:1 / -1}
    input,textarea{
      width:100%;padding:14px 12px;border:1px solid var(--line);border-radius:12px;
      font:inherit
    }
    .place{margin-top:12px;width:100%}

    /* Toggle PF/PJ */
    .pj-only{display:none}
    .pj-only.on{display:block}
    .pf-only.on{display:block}

    /* Responsive â€“ pe mobil mutÄƒm Cant. È™i Total sub produs */
    @media (max-width:600px){
      .cart-table thead{display:none}
      .cart-table tbody tr{display:grid;grid-template-columns:1fr auto;grid-template-areas:
        "prod remove"
        "qty  qty"
        "total total";
        row-gap:10px;align-items:center;padding:12px
      }
      .cart-table tbody td:nth-child(1){grid-area:prod;padding:0}
      .cart-table tbody td:nth-child(2){grid-area:qty;padding:0}
      .cart-table tbody td:nth-child(3){grid-area:total;padding:0;text-align:right}
      .cell-total{font-size:18px}
      .remove-wrap{grid-area:remove;justify-self:end}
      .qty{margin-top:4px}
      .form-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <div class="nav">
    <div class="nav-inner">
      <a href="index.html">AcasÄƒ</a>
      <a href="produse.html">Produse</a>
      <a href="despre.html">Despre</a>
      <a href="contact.html">Contact</a>
      <span style="margin-left:auto"></span>
      <span>ðŸ›’ <span id="cart-count">0</span></span>
    </div>
  </div>

  <div class="container">
    <h1>CoÈ™ul tÄƒu</h1>

    <!-- TABEL COÈ˜ -->
    <div class="card" style="margin-bottom:18px">
      <table class="cart-table">
        <thead>
          <tr>
            <th>Produs</th>
            <th>Cant.</th>
            <th style="text-align:right">Total</th>
          </tr>
        </thead>
        <tbody id="cart-body">
          <tr><td>Se Ã®ncarcÄƒâ€¦</td><td></td><td></td></tr>
        </tbody>
      </table>

      <div class="row-actions">
        <button id="btn-clear" class="btn">GoleÈ™te coÈ™ul</button>
        <a href="produse.html" class="btn">ContinuÄƒ cumpÄƒrÄƒturile</a>
      </div>
    </div>

    <!-- TOTALURI -->
    <div class="card" style="margin-bottom:18px">
      <h2>Totaluri</h2>
      <div class="totals">
        <div class="line"><span>Subtotal</span><span id="subval">0.00 RON</span></div>
        <div class="line"><span>Reducere</span><span id="discval">â€“ 0.00 RON</span></div>
        <div class="line"><span>Livrare</span><span id="shipval">0.00 RON</span></div>
        <div class="line total"><span>Total</span><span id="totalv">0.00 RON</span></div>
      </div>
      <p style="color:var(--muted);margin-top:10px">
        Reduceri: â‰¥200 RON â€“10%, â‰¥300 RON â€“15%, â‰¥400 RON â€“20%. Livrare gratuitÄƒ la 300 RON.
      </p>
    </div>

    <!-- FORMULAR LIVRARE -->
    <div class="card form-card">
      <h2>Detalii pentru livrare</h2>

      <div class="switch">
        <label><input type="radio" name="tip" value="pf" checked> PersoanÄƒ fizicÄƒ</label>
        <label><input type="radio" name="tip" value="pj"> PersoanÄƒ juridicÄƒ</label>
      </div>

      <!-- PF -->
      <div class="pf-only form-grid on">
        <input name="nume" placeholder="Nume" required>
        <input name="prenume" placeholder="Prenume" required>
      </div>

      <!-- PJ -->
      <div class="pj-only form-grid">
        <input name="firma" placeholder="Denumire firmÄƒ" class="full">
        <input name="cui"   placeholder="CUI">
        <input name="reg"   placeholder="Nr. Reg. ComerÈ›" class="full">
      </div>

      <!-- comune -->
      <div class="form-grid" style="margin-top:10px">
        <input name="email" placeholder="Email" class="full" required>
        <input name="telefon" placeholder="Telefon" class="full" required>
        <input name="judet" placeholder="JudeÈ›" required>
        <input name="oras" placeholder="OraÈ™" required>
        <input name="adresa" placeholder="AdresÄƒ completÄƒ" class="full" required>
        <input name="zip" placeholder="Cod poÈ™tal">
        <textarea name="mentiuni" placeholder="MenÈ›iuni (opÈ›ional)" rows="3" class="full"></textarea>
      </div>

      <button id="place-order" class="btn primary place">PlaseazÄƒ comanda</button>
    </div>

    <footer class="container" style="padding:24px 0;text-align:center;color:var(--muted)">
      Â© <span id="year"></span> â€” MSA Handmade. Toate drepturile rezervate.
    </footer>
  </div>

  <!-- Cart logic existent (NU modificÄƒm) -->
  <script src="cart.js?v=1"></script>
  <script src="script.js?v=1"></script>

  <!-- Mic JS: badge, an, toggle PF/PJ + â€žgoleÈ™te coÈ™ulâ€ -->
  <script>
    // anul
    document.addEventListener('DOMContentLoaded', ()=> {
      const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear();
    });

    // sincronizeazÄƒ badge dacÄƒ existÄƒ MSACart; altfel citeÈ™te din localStorage
    (function syncBadge(){
      try{
        if (window.MSACart && typeof MSACart.updateCartCountBadge==='function'){
          MSACart.updateCartCountBadge(); return;
        }
        const raw=localStorage.getItem('MSA_CART');
        const items=raw? JSON.parse(raw):[];
        const count = Array.isArray(items)? items.reduce((s,it)=>s+(Number(it.qty)||1),0):0;
        const el=document.getElementById('cart-count'); if(el) el.textContent=count;
      }catch(_){}
    })();
    window.addEventListener('storage',e=>{ if(e.key==='MSA_CART') location.reload(); });

    // PF / PJ toggle (aratÄƒ cÃ¢mpurile PJ + required corect)
    (function(){
      function sync(){
        const isPJ = (document.querySelector('input[name="tip"]:checked')||{}).value==='pj';
        document.querySelector('.pf-only')?.classList.toggle('on', !isPJ);
        document.querySelector('.pj-only')?.classList.toggle('on',  isPJ);
        ['firma','cui','reg'].forEach(n=>{ const el=document.querySelector('[name="'+n+'"]'); if(el) el.required=isPJ; });
        ['nume','prenume'].forEach(n=>{ const el=document.querySelector('[name="'+n+'"]'); if(el) el.required=!isPJ; });
      }
      document.addEventListener('DOMContentLoaded',sync);
      document.querySelectorAll('input[name="tip"]').forEach(r=>r.addEventListener('change',sync));
    })();

    // GoleÈ™te coÈ™ul â€“ foloseÈ™te MSACart dacÄƒ existÄƒ
    document.getElementById('btn-clear')?.addEventListener('click', ()=>{
      try{
        if (window.MSACart && typeof MSACart.clear==='function'){ MSACart.clear(); }
        else { localStorage.removeItem('MSA_CART'); }
      }finally{ location.reload(); }
    });

    /* NOTE despre layout-ul rÃ¢ndurilor:
       cart.js randeazÄƒ 3 celule (Produs / Cant. / Total) cu butoane .qminus, .qplus È™i input qty.
       CSS-ul de mai sus:
       - pe mobil ascunde thead
       - mutÄƒ celulele Ã®ntr-o grilÄƒ: PRODUS (sus), CANT. (sub produs), TOTAL (pe rÃ¢nd propriu, la dreapta)
       - mÄƒreÈ™te butoanele .qminus / .qplus È™i inputul
       Nu e nevoie sÄƒ schimbi nimic Ã®n cart.js.
    */
  </script>
</body>
</html>
