<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CoÈ™ â€” MSA Handmade</title>

  <!-- SEO / OG -->
  <meta name="description" content="FinalizeazÄƒ comanda pentru lumÃ¢nÄƒri È™i decoraÈ›iuni MSA Handmade. Livrare gratuitÄƒ de la 300 RON.">
  <link rel="canonical" href="https://www.msahandmade.ro/cos.html">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.msahandmade.ro/cos.html">
  <meta property="og:title" content="CoÈ™ â€” MSA Handmade">
  <meta property="og:description" content="CoÈ™ul tÄƒu MSA Handmade. Vezi produsele È™i plaseazÄƒ comanda.">
  <meta property="og:image" content="https://www.msahandmade.ro/images/logo.png">

  <link rel="stylesheet" href="styles.css" />
  <style>
    /* AsigurÄƒ container Ã®ngust È™i aspect curat, conform styles.css */
    main.wrap.narrow { max-width: 850px; margin: 0 auto; padding: 0 16px; }

    /* Stiluri de card pentru lista redatÄƒ de MSACart.render() */
    .cart-card{display:flex;gap:12px;padding:12px 8px;border-bottom:1px solid #eee}
    .cart-left img{width:82px;height:82px;object-fit:cover;border-radius:10px}
    .cart-mid{flex:1;display:flex;flex-direction:column;gap:6px}
    .cart-mid .name{font-weight:700}
    .qty{display:flex;gap:8px;align-items:center}
    .qty button{min-width:32px;height:32px;border-radius:8px;border:1px solid #ddd;background:#f8f8f8}
    .qty input{width:64px;height:32px;border:1px solid #ddd;border-radius:8px;padding:0 8px;text-align:center}
    .danger{background:#ffe9e9;border-color:#ffc9c9}
    .muted{color:#777;font-size:.9rem}
    .box{background:#fff;border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.06)}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
  </style>
</head>
<body>
  <!-- promo -->
  <div class="promo">
    <b>Reduceri pÃ¢nÄƒ la -20%</b> Â· <b>Livrare gratuitÄƒ</b> de la <b>300 RON</b>
  </div>

  <!-- NAV -->
  <header class="header">
    <nav id="main-nav">
      <a href="index.html">AcasÄƒ</a>
      <a href="produse.html">Produse</a>
      <a href="despre.html">Despre</a>
      <a href="contact.html">Contact</a>
      <a href="cos.html" class="cart-pill" aria-label="Vezi coÈ™ul">ğŸ›’ <span id="cart-count">0</span></a>
    </nav>
  </header>

  <main class="wrap narrow">
    <h1>CoÈ™ul tÄƒu</h1>

    <!-- LISTA de produse din coÈ™ (MSACart.render() scrie aici) -->
    <div id="items" class="box"></div>

    <!-- TOTALURI (ID-urile sunt fix ce foloseÈ™te cart.js) -->
    <div class="box" style="margin-top:14px">
      <strong>Totaluri</strong>
      <div class="totals">
        <div class="row"><span>Subtotal</span> <span id="subtot">0.00</span> RON</div>
        <div class="row"><span>Reducere</span> <span id="disc">0.00</span> RON</div>
        <div class="row"><span>Livrare</span> <span id="ship">17.00</span> RON</div>
        <div class="row big"><span>Total</span> <span id="grand">17.00</span> RON</div>
      </div>
      <small class="muted" style="display:block;margin-top:6px">
        Reduceri automate: â‰¥200 RON âˆ’10%, â‰¥300 RON âˆ’15% + livrare gratuitÄƒ, â‰¥400 RON âˆ’20%.
      </small>
    </div>

    <!-- FORMULAR (PF/PJ identic cu ce aÈ™teaptÄƒ submitOrder) -->
    <form id="order-form" class="box" style="margin-top:14px">
      <fieldset style="margin-bottom:10px">
        <legend>Tip client</legend>
        <label><input type="radio" name="tip" value="PersoanÄƒ fizicÄƒ" checked> PersoanÄƒ fizicÄƒ</label>
        &nbsp;&nbsp;
        <label><input type="radio" name="tip" value="PersoanÄƒ juridicÄƒ"> PersoanÄƒ juridicÄƒ</label>
      </fieldset>

      <div class="row"><label>Nume<input class="input" name="nume" required></label></div>
      <div class="row"><label>Prenume<input class="input" name="prenume" required></label></div>
      <div class="row"><label>Email<input class="input" type="email" name="email" required></label></div>
      <div class="row"><label>Telefon<input class="input" name="telefon" required></label></div>
      <div class="row"><label>JudeÈ›<input class="input" name="judet" required></label></div>
      <div class="row"><label>OraÈ™<input class="input" name="oras" required></label></div>
      <div class="row"><label>Cod poÈ™tal<input class="input" name="codpostal" required></label></div>
      <div class="row"><label>AdresÄƒ<input class="input" name="adresa" required></label></div>

      <!-- CÃ¢mpuri PJ (se afiÈ™eazÄƒ doar cÃ¢nd alegi PersoanÄƒ juridicÄƒ) -->
      <div id="pj" style="display:none;margin-top:10px">
        <hr>
        <strong>PersoanÄƒ juridicÄƒ</strong>
        <div class="row" style="margin-top:8px"><label>FirmÄƒ<input class="input" name="firma"></label></div>
        <div class="row"><label>CUI<input class="input" name="cui"></label></div>
        <div class="row"><label>Reg. Com.<input class="input" name="regcom"></label></div>
      </div>

      <div class="row"><label>MenÈ›iuni (opÈ›ional)<textarea class="input" name="mentiuni" rows="3" placeholder="Culoare, mesaj, interval orar, etc."></textarea></label></div>

      <div class="actions" style="margin-top:12px">
        <button type="button" id="clear" class="btn ghost">GoleÈ™te coÈ™ul</button>
        <button type="submit" id="place-order" class="btn primary">ConfirmÄƒ comanda</button>
      </div>
    </form>
  </main>

  <footer>
    <small>&copy; <span id="year"></span> â€“ MSA Handmade. Toate drepturile rezervate.</small>
    <nav class="legal-nav">
      <a href="termeni.html">Termeni & CondiÈ›ii</a> Â·
      <a href="confidentialitate.html">ConfidenÈ›ialitate</a> Â·
      <a href="cookies.html">Cookies</a> Â·
      <a href="retur.html">Retur</a>
    </nav>
  </footer>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <!-- Logica coÈ™ului (cart.js-ul TÄ‚U cu proforma) -->
  <script src="cart.js"></script>

  <script>
    // anul din footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Comutare PF/PJ
    document.addEventListener('change', (e)=>{
      if (e.target.name === 'tip') {
        document.getElementById('pj').style.display =
          e.target.value === 'PersoanÄƒ juridicÄƒ' ? '' : 'none';
      }
    });

    // GoleÈ™te coÈ™ul
    document.getElementById('clear')?.addEventListener('click', ()=>{
      if (confirm('Sigur goleÈ™ti coÈ™ul?')) { MSACart.clearCart(); MSACart.render(); }
    });

    // Randare + badge
    document.addEventListener('DOMContentLoaded', ()=>{
      if (window.MSACart?.render) MSACart.render();
    });

    // Submit â†’ foloseÈ™te EXACT MSACart.submitOrder (trimite proforma + 2 emailuri)
    document.getElementById('order-form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const list = MSACart.readCart?.() || [];
      if (!list.length){ return alert('CoÈ™ul este gol.'); }

      const btn = document.getElementById('place-order');
      if (btn) { btn.disabled = true; const old = btn.textContent; btn.textContent = 'Se trimiteâ€¦'; }

      try{
        await MSACart.submitOrder(new FormData(e.target));
      }catch(err){
        alert('Eroare la trimiterea comenzii: ' + (err?.message||''));
      }finally{
        if (btn) { btn.textContent = 'ConfirmÄƒ comanda'; btn.disabled = false; }
      }
    });
  </script>
</body>
</html>
